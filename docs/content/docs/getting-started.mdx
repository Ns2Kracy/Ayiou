---
title: 快速开始
description: 使用 Ayiou 构建你的第一个 Bot（OneBot / Console）
---

## 安装

```toml
[dependencies]
ayiou = { git = "https://github.com/Ns2Kracy/Ayiou.git" }
anyhow = "1.0"
tokio = { version = "1", features = ["full"] }
async-trait = "0.1"
```

## 核心概念

- `Bot<A>`：平台无关的运行时
- `Driver`：连接层
- `Adapter / ProtocolAdapter`：协议转换层
- `Plugin`：业务逻辑

## 示例 1：OneBot v11

```rust
use ayiou::prelude::*;
use ayiou::adapter::onebot::v11::adapter::OneBotV11Adapter;

#[derive(Plugin)]
#[plugin(name = "echo", command = "echo", prefix = "/")]
struct EchoPlugin;

impl EchoPlugin {
    async fn execute(&self, ctx: &Ctx) -> anyhow::Result<()> {
        let args = ctx.command_args().unwrap_or_default();
        if args.is_empty() {
            ctx.reply_text("Usage: /echo <text>").await?;
            return Ok(());
        }
        ctx.reply_text(format!("echo: {}", args)).await?;
        Ok(())
    }
}

#[tokio::main]
async fn main() {
    let bot = Bot::<OneBotV11Adapter>::new()
        .command_prefixes(["/", "!", "."])
        .register_plugin(EchoPlugin);

    bot.run(OneBotV11Adapter::new("ws://127.0.0.1:8080")).await;
}
```

## 示例 2：Console（本地调试）

```rust
use ayiou::prelude::*;

#[derive(Plugin)]
#[plugin(
    name = "help",
    command = "help",
    prefix = "/",
    context = "ayiou::adapter::console::ctx::Ctx"
)]
struct HelpPlugin;

impl HelpPlugin {
    async fn execute(&self, ctx: &ConsoleCtx) -> anyhow::Result<()> {
        ctx.reply_text("Commands: /help").await
    }
}

#[tokio::main]
async fn main() {
    let bot = ConsoleBot::console().register_plugin(HelpPlugin);
    bot.run_stdio().await;
}
```

## 常用 Context API（OneBot）

- `ctx.text() -> String`
- `ctx.user_id() -> i64`
- `ctx.group_id() -> Option<i64>`
- `ctx.reply_text("...")`
- `ctx.command_name()` / `ctx.command_args()`

## 下一步

- 多命令插件：见「命令系统与 DX」
- 可持久化状态与会话：见「存储与会话」
- 可观测接入：见「可观测能力」
